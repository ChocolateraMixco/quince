<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XV Años | Aidy Milián</title>
    <style>
        :root {
            --rosa-claro: #f8d7e8;
            --rosa-medio: #f4a6d7;
            --rosa-oscuro: #e67fb5;
            --dorado: #d4af37;
            --dorado-oscuro: #b38f2e;
            --blanco: #fff9fb;
            --negro: #2a0a1a;
            --papel-oscuro: #f5f0e8;
            --papel-claro: #faf7f2;
            --pergamino: #f3e9d9;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Playfair Display', serif;
        }
        
        body {
            color: var(--negro);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: var(--papel-claro);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            background-attachment: fixed;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            overflow: hidden;
            position: relative;
        }
        
        /* Efecto de borde de página */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://www.transparenttextures.com/patterns/vintage-speckles.png');
            opacity: 0.08;
            pointer-events: none;
            z-index: -1;
        }
        
        /* Header con foto de fondo */
        header {
            position: relative;
            height: 100vh;
            background: linear-gradient(to bottom, rgba(42, 10, 26, 0.5), rgba(42, 10, 26, 0.7)), 
            url('15 años 2.jpg') center/cover no-repeat;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            overflow: hidden;
        }
        
        /* Ajustes especiales para la imagen de fondo */
        @media (orientation: portrait) {
            header {
                background-size: auto 100%;
                background-position: top center;
            }
        }
        
        @media (orientation: landscape) {
            header {
                background-size: 100% auto;
                background-position: center 30%;
            }
        }
        
        .header-content {
            z-index: 2;
            width: 100%;
            padding: 20px;
            position: relative;
            margin-top: 20vh;
            animation: fadeIn 1.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            font-weight: normal;
            margin: 0;
            color: var(--blanco);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            margin-bottom: 15px;
        }
        
        .tagline {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--dorado);
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }
        
        .tagline::before, .tagline::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 30px;
            height: 1px;
            background: var(--dorado);
        }
        
        .tagline::before {
            left: -35px;
        }
        
        .tagline::after {
            right: -35px;
        }
        
        .tiara-container {
            position: relative;
            width: 100px;
            height: 60px;
            margin: 20px auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .tiara {
            font-size: 2.5rem;
            color: var(--dorado);
        }
        
        /* Sección del contador */
        .countdown-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 60px 20px;
            text-align: center;
            background-color: var(--papel-claro);
            background-image: url('15 años fondo_form.jpg');
            position: relative;
        }
        
        .countdown-section h2 {
            color: var(--rosa-oscuro);
            font-family: 'Great Vibes', cursive;
            font-size: 2.5rem;
            margin-bottom: 30px;
        }
        
        .countdown {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 0 auto;
            max-width: 400px;
        }
        
        .countdown-item {
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            border: 1px solid var(--rosa-medio);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .countdown-number {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 500;
            color: var(--rosa-oscuro);
            margin-bottom: 5px;
        }
        
        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--dorado-oscuro);
        }
        
        .fecha-container {
            position: relative;
            margin: 30px 0;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            display: inline-block;
        }
        
        .fecha {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 1px;
            color: var(--blanco);
        }
        
        /* Sección principal unificada */
        .seccion-principal {
            padding: 80px 20px;
            text-align: center;
            position: relative;
            margin: 0;
            background-color: var(--blanco);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            border-radius: 0;
            overflow: hidden;
        }
        
        .seccion-principal h2 {
            color: var(--rosa-oscuro);
            font-family: 'Great Vibes', cursive;
            font-size: 3rem;
            margin-bottom: 40px;
        }
        
        .seccion-principal p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
            color: #555;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .firma {
            font-family: 'Great Vibes', cursive;
            font-size: 2.8rem;
            color: var(--dorado);
            margin-top: 40px;
            display: block;
        }
        
        /* Ubicación */
        .ubicacion {
            padding: 60px 20px;
            text-align: center;
            background-color: var(--papel-claro);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
        }
        
        .ubicacion h2 {
            color: var(--rosa-oscuro);
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 30px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            padding: 15px;
            background: var(--blanco);
            border-radius: 10px;
            border-left: 4px solid var(--dorado);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .info-icon {
            margin-right: 15px;
            font-size: 1.5rem;
            color: var(--dorado);
        }
        
        .mapa-container {
            position: relative;
            margin: 30px auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            height: 300px;
            border: 1px solid var(--rosa-claro);
            max-width: 800px;
        }
        
        .mapa {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Botones de navegación */
        .navigation-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
            width: 100%;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .nav-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 25px;
            border-radius: 30px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            border: none;
        }
        
        .nav-btn i {
            margin-right: 12px;
            font-size: 1.3rem;
        }
        
        .waze-btn {
            background: linear-gradient(to right, #33CCFF, #3399FF);
            color: white;
        }
        
        .maps-btn {
            background: linear-gradient(to right, #4285F4, #34A853);
            color: white;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Formulario de confirmación */
        .confirmar {
            padding: 80px 20px 120px; /* Más padding-bottom para el sello */
            text-align: center;
            position: relative;
            z-index: 1;
            background: linear-gradient(rgba(255, 249, 251, 0.226), rgba(233, 233, 233, 0.192)), 
                        url('15 años 1.jpg') center/cover no-repeat fixed;
            margin-bottom: -80px; /* Compensa el padding extra */
        }

        .confirmar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.7);
            z-index: -1;
        }

        #confirmacionForm {
            position: relative;
            z-index: 2;
            max-width: 500px;
            margin: 0 auto;
            padding: 40px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .confirmar h2 {
            color: var(--rosa-oscuro);
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 30px;
            position: relative;
        }

        .form-group {
            margin-bottom: 30px;
            text-align: center;
        }

        .family-select {
            width: 100%;
            padding: 18px 25px;
            background: var(--blanco);
            border: 2px solid var(--rosa-medio);
            border-radius: 10px;
            color: var(--negro);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23d4af37'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 20px center;
            background-size: 24px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .family-select:focus {
            outline: none;
            border-color: var(--dorado);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .submit-btn {
            background: linear-gradient(to right, var(--dorado), var(--dorado-oscuro));
            color: var(--negro);
            border: none;
            padding: 18px 45px;
            border-radius: 30px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
            margin: 20px auto 0;
            display: block;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }
        
        #confirmationMessage {
            display: none;
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
            font-size: 1.1rem;
        }

        #confirmationMessage.success {
            background-color: rgba(232, 245, 233, 0.9);
            color: #2e7d32;
            border: 1px solid #a5d6a7;
        }

        #confirmationMessage.error {
            background-color: rgba(255, 235, 238, 0.9);
            color: #c62828;
            border: 1px solid #ef9a9a;
        }

        /* Footer */
        footer {
            padding: 120px 20px 60px; /* Más padding-top para el sello */
            text-align: center;
            background-color: var(--papel-claro);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            position: relative;
            z-index: 2; /* Asegura que está sobre el fondo de confirmar */
        }

        .sello-elegante {
            position: absolute;
            top: -60px; /* Ajustado para superponerse correctamente */
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, var(--dorado) 40%, transparent 70%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 10; /* Mayor que otros elementos */
            border: 3px double rgba(180, 150, 50, 0.8);
        }

        /* Efecto hover para el sello */
        .sello-elegante:hover {
            transform: translateX(-50%) scale(1.05);
            transition: all 0.3s ease;
        }
        .sello-elegante::before {
            content: 'XV';
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: var(--rosa-oscuro);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-top: -10px;
        }

        .footer-content h3 {
            font-family: 'Great Vibes', cursive;
            font-size: 2.5rem;
            color: var(--rosa-oscuro);
            margin-bottom: 30px;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }
        
        .social-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            background: linear-gradient(to right, var(--rosa-medio), var(--rosa-oscuro));
            border-radius: 50%;
            color: var(--blanco);
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .social-icon:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .copyright {
            font-size: 0.9rem;
            color: var(--negro);
            margin-top: 30px;
            opacity: 0.7;
        }
        
        /* Animaciones */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }
        
        .delay-1 { animation-delay: 0.3s; }
        .delay-2 { animation-delay: 0.6s; }
        .delay-3 { animation-delay: 0.9s; }
        .delay-4 { animation-delay: 1.2s; }
        
        /* Loader */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--blanco);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease, visibility 1s ease;
        }
        
        .loader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loader-content {
            text-align: center;
        }
        
        .loader-text {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--rosa-oscuro);
            margin-bottom: 30px;
        }
        
        .loader-flower {
            font-size: 4rem;
            color: var(--rosa-medio);
            animation: spin 2s linear infinite;
            margin-bottom: 30px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Efecto de confeti */
        .confeti {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: var(--rosa-claro);
            opacity: 0.7;
            animation: caida-confeti 5s linear infinite;
            z-index: 0;
        }

        @keyframes caida-confeti {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(600px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.8rem;
            }
            
            .countdown-item {
                width: 70px;
                height: 70px;
            }
            
            .countdown-number {
                font-size: 1.8rem;
            }
            
            .seccion-principal h2,
            .ubicacion h2,
            .confirmar h2,
            .footer-content h3 {
                font-size: 2.2rem;
            }
            
            .sello-elegante {
                width: 100px;
                height: 100px;
            }
            
            .sello-elegante::before {
                font-size: 3rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .countdown {
                gap: 8px;
            }
            
            .countdown-item {
                width: 60px;
                height: 60px;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
            
            .countdown-label {
                font-size: 0.7rem;
            }
            
            .seccion-principal h2,
            .ubicacion h2,
            .confirmar h2,
            .footer-content h3 {
                font-size: 1.8rem;
            }
            
            .seccion-principal p {
                font-size: 1rem;
            }
            
            .firma {
                font-size: 2.2rem;
            }
            
            #confirmacionForm {
                padding: 30px 20px;
            }
            
            .family-select {
                padding: 15px 20px;
                font-size: 1rem;
            }
            
            .submit-btn {
                padding: 15px 30px;
                font-size: 1rem;
            }
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;500;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        // Inicializa EmailJS con tu User ID público
        emailjs.init('xPjRFd8bzVbjvv38R'); // Reemplaza con tu User ID real
    </script>
</head>
<body>
    <!-- Pantalla de carga -->
    <div class="loader" id="loader">
        <div class="loader-content">
            <div class="loader-flower"><i class="fas fa-spa"></i></div>
            <div class="loader-text">Bienvenidos a mis XV años</div>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="header-content">
                <div class="tagline fade-in">Una Celebración Especial</div>
                <div class="tiara-container fade-in delay-2">
                    <div class="tiara"> </div>
                </div>
                
                <h1 class="fade-in delay-1">XV Años Aidy Milián</h1>
                <div class="fecha-container fade-in delay-3">
                    <p class="fecha">14 DE JUNIO 2025 | 3:00 PM</p>
                </div>
            </div>
        </header>

        <!-- Sección del contador -->
        <section class="countdown-section fade-in">
            <h2>Faltan solo...</h2>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">Días</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Horas</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutos</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Segundos</div>
                </div>
            </div>
        </section>

        <!-- Sección principal unificada -->
        <section class="seccion-principal fade-in delay-1">
            <h2>Una Celebración Inolvidable</h2>
            
            <!-- Efecto de confeti -->
            <div class="confeti" style="left: 10%; animation-delay: 0s;"></div>
            <div class="confeti" style="left: 20%; animation-delay: 1s; background-color: var(--dorado);"></div>
            <div class="confeti" style="left: 30%; animation-delay: 2s;"></div>
            <div class="confeti" style="left: 40%; animation-delay: 0.5s; background-color: var(--blanco);"></div>
            <div class="confeti" style="left: 50%; animation-delay: 1.5s;"></div>
            
            <p>Querido Dios, en este día de inmensa alegría, elevo mi voz para darte gracias por permitirme llegar a este momento tan especial en mi vida. Con profunda emoción celebro mis quince años rodeada del amor de mis padres, hermana y amigos que han sido luz en mi camino, llevando en mi corazón los valores que me han inculcado.</p>

            <p>Te doy gracias por cada sonrisa, por cada enseñanza, por la salud que me sostiene y por la bendición de tener a mis padres.</p>
            
            <div style="text-align: center; margin: 40px 0;">
                <p style="font-family: 'Great Vibes', cursive; font-size: 2rem; color: var(--dorado); margin-bottom: 15px;">
                    Oscar Alfredo Milián Córdova<br>
                    Brenda Azucena Tello Ramírez
                </p>
                
                <div style="font-family: 'Great Vibes', cursive; font-size: 4rem; color: var(--rosa-oscuro); margin: 15px 0;">
                    XV
                </div>
                <p style="font-style: italic; font-size: 1.2rem;">
                    De su adorada hija:
                </p>
                <p style="font-family: 'Great Vibes', cursive; font-size: 2.5rem; color: var(--dorado); margin-top: 15px;">
                    Aidy Linneth Milián Tello
                </p>
            </div>  
        </section>

        <section class="ubicacion fade-in delay-2">
            <h2>Ubicación</h2>
            <div class="info-item">
                <i class="fas fa-map-marker-alt info-icon"></i>
                <p>Salón de Eventos "Jardin La Asuncion" San Lucas Sacatepéquez</p>
            </div>
            <div class="mapa-container">
                <iframe class="mapa" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4650.030389464121!2d-90.66242422420251!3d14.611491576808529!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85890b757ae81385%3A0x7bfc6b95f07e4b3!2sJardin%20Para%20Eventos%20La%20Asuncion!5e1!3m2!1ses-419!2sgt!4v1745872672110!5m2!1ses-419!2sgt" allowfullscreen="" loading="lazy"></iframe>
            </div>
            
            <div class="navigation-buttons">
                <button class="nav-btn waze-btn" onclick="abrirWaze()">
                    <i class="fab fa-waze"></i> ABRIR EN WAZE
                </button>
                <button class="nav-btn maps-btn" onclick="abrirGoogleMaps()">
                    <i class="fab fa-google"></i> ABRIR EN MAPS
                </button>
            </div>
        </section>

        <section class="confirmar fade-in delay-3">
            <h2>Confirmar Asistencia</h2>
            <form id="confirmacionForm">
                <div class="form-group">
                    <select class="family-select" name="familia" id="familySelect" required onchange="mostrarMaxInvitados()">
                        <option value="" disabled selected>Selecciona tu familia</option>
                        <!-- Las opciones se llenarán con JavaScript -->
                    </select>
                    <div id="maxInvitadosInfo" style="margin-top: 10px; font-style: italic; color: var(--dorado-oscuro); display: none;">
                        Número de invitados máximo para esta familia: <span id="maxInvitadosSpan">0</span>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">CONFIRMAR ASISTENCIA</button>
            </form>
            
            <div id="confirmationMessage">
                <i class="fas fa-check-circle"></i> <span id="messageText"></span>
            </div>
        </section>
    
        <footer class="fade-in delay-4">
            <div class="sello-elegante"></div>
            <div class="footer-content">
                <h3>¡Espero verte en mi fiesta!</h3>
                <div class="social-icons">
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                </div>
                <p class="copyright">© 2025 XV Años Aidy. Todos los derechos reservados.</p>
            </div>
        </footer>
    </div>

    <script>
        // Pantalla de carga
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loader').classList.add('hidden');
            }, 2000);
        });

        // Cuenta regresiva
        function updateCountdown() {
            const targetDate = new Date('June 14, 2025 15:00:00').getTime();
            const now = new Date().getTime();
            const distance = targetDate - now;
            
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }

        // Datos completos de familias
        let familyData = JSON.parse(localStorage.getItem('familyData')) || [
            {name: "Milián Cordóva/abuelos", max: 2, confirmados: 0},
            {name: "Milián Palencia", max: 4, confirmados: 0},
            {name: "Milián Catalán", max: 5, confirmados: 0},
            {name: "Milián Tello", max: 4, confirmados: 0},
            {name: "Santos Milián", max: 2, confirmados: 0},
            {name: "Samól Tello", max: 3, confirmados: 0},
            {name: "Salaz Tello", max: 3, confirmados: 0},
            {name: "Bonilla Tello", max: 5, confirmados: 0},
            {name: "Molina Tello", max: 4, confirmados: 0},
            {name: "Marina e Hija", max: 2, confirmados: 0},
            {name: "Lilo Ortiz y Fam.", max: 4, confirmados: 0},
            {name: "Belsi Ortiz y Fam.", max: 3, confirmados: 0},
            {name: "César Ortiz Milián y esposa", max: 2, confirmados: 0},
            {name: "Pedro Ortiz y Fam.", max: 4, confirmados: 0},
            {name: "Gregorio Milián y Fam.", max: 4, confirmados: 0},
            {name: "Fila Milián y Nieta", max: 2, confirmados: 0},
            {name: "Aura Ortiz y Fam.", max: 3, confirmados: 0},
            {name: "Fidel Milián Cordóva y Fam.", max: 3, confirmados: 0},
            {name: "Vidal Milián y Fam.", max: 4, confirmados: 0},
            {name: "María Córdova", max: 1, confirmados: 0},
            {name: "Sian Córdova", max: 5, confirmados: 0},
            {name: "César Galvéz Córdova e Hija", max: 2, confirmados: 0},
            {name: "Claudia Galvéz Córdova, Esposo e Hijo", max: 3, confirmados: 0},
            {name: "Martina Córdova y Esposo", max: 2, confirmados: 0},
            {name: "Galvéz Arrivillaga", max: 4, confirmados: 0},
            {name: "Nidia Castillo e Hijo", max: 2, confirmados: 0},
            {name: "Esteban Médoza", max: 4, confirmados: 0},
            {name: "Pastor Xar y Esposa", max: 2, confirmados: 0},
            {name: "Bayron Yantuche y Fam.", max: 4, confirmados: 0},
            {name: "Eliseo Péres y Fam.", max: 5, confirmados: 0},
            {name: "Miguel Solis y Fam.", max: 5, confirmados: 0},
            {name: "Soila Hernández y Fam.", max: 3, confirmados: 0},
            {name: "Magali Hernández y Fam.", max: 3, confirmados: 0},
            {name: "Andrea Hernández y Fam.", max: 4, confirmados: 0},
            {name: "Ruth Gónzales", max: 1, confirmados: 0},
            {name: "Celia Garcia y Esposo", max: 2, confirmados: 0},
            {name: "Armindo Garcia y Esposa", max: 2, confirmados: 0},
            {name: "Silvia Líquez", max: 3, confirmados: 0},
            {name: "Joselyn de Milián", max: 1, confirmados: 0},
            {name: "Jorge Ortiz", max: 1, confirmados: 0},
            {name: "Eunice de Milián", max: 2, confirmados: 0},
            {name: "Loidy de Ortiz e Hija", max: 1, confirmados: 0},
            {name: "Licenciada Cynthia Rodriguez", max: 1, confirmados: 0},
            {name: "Joshua Guevara", max: 1, confirmados: 0},
            {name: "Samantha López", max: 1, confirmados: 0},
            {name: "Daniela Higueros", max: 1, confirmados: 0},
            {name: "Freddy Molina", max: 2, confirmados: 0},
            {name: "Antoan Ruiz", max: 1, confirmados: 0},
            {name: "Kevin Poqom", max: 1, confirmados: 0},
            {name: "Alexander Chanquín", max: 1, confirmados: 0},
            {name: "Karen García", max: 3, confirmados: 0},
            {name: "Jaime Ortiz, Esposa e Hija", max: 1, confirmados: 0},
            {name: "Danilo Ordoñes Córdova", max: 1, confirmados: 0},
            {name: "Wilder Ordoñes Córdova", max: 1, confirmados: 0},
            {name: "Grupo Norteño Getsemani", max: 10, confirmados: 0}
        ];

        // Función para actualizar el localStorage
            function updateStorage() {
                localStorage.setItem('familyData', JSON.stringify(familyData));
            }

        // Cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            const familySelect = document.getElementById('familySelect');
            const maxInvitadosInfo = document.getElementById('maxInvitadosInfo');
            const maxInvitadosSpan = document.getElementById('maxInvitadosSpan');
            const confirmationForm = document.getElementById('confirmacionForm');
            const confirmationMessage = document.getElementById('confirmationMessage');
            const messageText = document.getElementById('messageText');

            // Función para mostrar el máximo de invitados
            window.mostrarMaxInvitados = function() {
                const selectedOption = familySelect.options[familySelect.selectedIndex];
                
                if (selectedOption.value) {
                    const familia = familyData.find(f => f.name === selectedOption.value);
                    if (familia) {
                        maxInvitadosSpan.textContent = familia.max;
                        maxInvitadosInfo.style.display = 'block';
                    }
                } else {
                    maxInvitadosInfo.style.display = 'none';
                }
            };

            // Llenar el select con las familias disponibles
            function populateFamilySelect() {
            familySelect.innerHTML = '';
            
            const defaultOption = document.createElement('option');
            defaultOption.value = "";
            defaultOption.textContent = "Selecciona tu familia";
            defaultOption.disabled = true;
            defaultOption.selected = true;
            familySelect.appendChild(defaultOption);
            
            // Filtrar usando datos persistentes
            const familiasDisponibles = familyData.filter(f => f.confirmados === 0);
                
                // Ordenar alfabéticamente
                familiasDisponibles.sort((a, b) => a.name.localeCompare(b.name));
                
                familiasDisponibles.forEach(family => {
                    const option = document.createElement('option');
                    option.value = family.name;
                    option.textContent = `${family.name} (Máx: ${family.max})`;
                    option.setAttribute('data-max', family.max);
                    familySelect.appendChild(option);
                });

                // Si no hay familias disponibles
                if (familiasDisponibles.length === 0) {
                    const option = document.createElement('option');
                    option.value = "";
                    option.textContent = "Todas las familias han confirmado";
                    option.disabled = true;
                    familySelect.appendChild(option);
                }
            }

            // Mostrar mensaje de confirmación/error
            function showMessage(text, isSuccess) {
                messageText.textContent = text;
                confirmationMessage.className = isSuccess ? 'success' : 'error';
                confirmationMessage.style.display = 'block';
                
                // Cambiar el ícono según éxito/error
                const icon = confirmationMessage.querySelector('i');
                icon.className = isSuccess ? 'fas fa-check-circle' : 'fas fa-times-circle';
                
                setTimeout(() => {
                    confirmationMessage.style.display = 'none';
                }, 5000);
            }

            // Manejar envío del formulario
            confirmationForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = this.querySelector('.submit-btn');
                const originalText = submitBtn.innerHTML;
                const familiaNombre = familySelect.value;
                
                // Validar selección
                if (!familiaNombre) {
                    showMessage('Por favor selecciona una familia', false);
                    return;
                }
                
                // Mostrar estado de carga
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
                submitBtn.disabled = true;
                
                try {
                    // Actualizar datos
                    const familiaIndex = familyData.findIndex(f => f.name === familiaNombre);
                    if (familiaIndex !== -1) {
                        familyData[familiaIndex].confirmados = 1;
                        updateStorage(); // Actualizar localStorage
                    }
                                
                    // Enviar con EmailJS
                    await emailjs.send(
                        'service_q7q71oq', // Tu Service ID
                        'template_lcj61mv', // Tu Template ID
                        {
                            familia: familiaNombre,
                            invitados: 1, // Siempre será 1
                            max_invitados: familyData[familiaIndex].max, // Enviamos el máximo como referencia
                            fecha: new Date().toLocaleString()
                        }
                    );
                    
                    showMessage(`¡Confirmación exitosa! La familia ${familiaNombre} ha confirmado asistencia.`, true);
                    
                    // Actualizar lista de familias disponibles
                    populateFamilySelect();
                    maxInvitadosInfo.style.display = 'none';
                    confirmationForm.reset();
                    
                } catch (error) {
                    console.error('Error al enviar:', error);
                    showMessage('Error al enviar. Por favor intenta nuevamente.', false);
                    
                    // Revertir confirmación si hubo error
                    const familiaIndex = familyData.findIndex(f => f.name === familiaNombre);
                    if (familiaIndex !== -1) {
                        familyData[familiaIndex].confirmados = 0;
                    }
                } finally {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            });

            // Inicializar
            populateFamilySelect();
        });

        // Al cargar la página por primera vez
        if (!localStorage.getItem('familyData')) {
            updateStorage(); // Guardar datos iniciales
        }


        // Funciones para abrir aplicaciones de navegación
        function abrirWaze() {
            const lat = 14.611486;
            const lng = -90.659849;
            
            window.location.href = `waze://?ll=${lat},${lng}&navigate=yes`;
            
            setTimeout(function() {
                window.location.href = `https://www.waze.com/ul?ll=${lat},${lng}&navigate=yes`;
            }, 500);
        }

        function abrirGoogleMaps() {
            const lat = 14.611486;
            const lng = -90.659849;
            
            window.location.href = `comgooglemaps://?daddr=${lat},${lng}&directionsmode=driving`;
            
            setTimeout(function() {
                window.location.href = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`;
            }, 500);
        }

        // Inicializar contador
        updateCountdown();
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>
